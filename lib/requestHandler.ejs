<% if (strict) { -%>
    "use strict";
<% } -%>

<% if (view) { -%>
    import { NextFunction, Request, Response } from 'express';
    export type Handler = (
        req: Request,
        res: Response,
        next: NextFunction,
    ) => any | Promise<any>;

    /**
    * wrap을 통해서 리스폰스 값에 대해 기본적으로 들어가야 할 내용들을 미리 입력해 놓음
    * @param handler
    */
    export const wrap =
        (handler: Handler) =>
        async (req: Request, res: Response, next: NextFunction) => {
            try {
                const result = await handler(req, res, next);
                if (!result.callback)
                    res.json({ response: true, result: result, error: null });
                next();
            } catch (err) {
                next(err);
            }
        };
<% } -%>